# UIMeter FAQ

## 整机与接口

### 几个版本差异是什么?
> UIMeter V2.0/V3.0主板分2个版本：标准版、高分辨率版，主要差异在电流分辨率和电流测量范围。

> - 标准版：电流25mR取样，0.1mA分辨率，电流正负10A。
> - 高分辨率版：电流2.2R取样，1uA分辨率，电流正负100mA。

> 可以自行更换检流电阻实现标准版和高分辨率切换，更换以后需要使用`info dev`命令设置设备类型并重新校准。

> 所有版本离线存储都是4096点，都可以选配TFT屏幕和电池模块。

> USB版本使用OLED屏幕，有塑料外壳。

> TFT版本为PCB框架结构，支持TypeC输入。

### V2.0/V3.0硬件有什么变化？
> 主要变化是MCU从8位的C51升级到了ARM 32位MCU，处理能力更强，功耗更低，V2.0使用STM32，V3.0使用GD32。

> 冷端温度测量元件从18B20更换为TMP75。

> MicroUSB更换为更加坚固的型号。

### USB接口怎么处理的？
> MicroUSB接口输入J2只连接VCC和GND，D+和D-悬空。
> 标准USB母口输出J3连接VCC和GND，D+和D-通过跳线J8接出。默认使用跳线短接，
  即J3默认为短接D+和D-。用户可以去掉短路跳线，使用杜邦线连接标准USB公头。

### MicroUSB接口能否支持5V以外电压？
> 可以支持，实际上，MicroUSB接口和5.08接口的2 3脚并联在一起。大于5V小于5V均可。

### MicroUSB能否支持高通QC2.0？
> 高通QC2.0通过操作D+和D-让充电器输出9V、12V电压，虽然UIMeter的MicroUSB接口
  D+、D-悬空，但是用户可以通过J6和J8外接USB公头，完整连接VCC、D-、D+、GND。
  因此可以支持QC2.0.某些apple、samsung设备需要充电器识别电阻，也可以通过该方法支持。
> 注意：由于不能承受超过5V以上电压，使用高通QC2.0的时候，UIMeter必须断开J4
  使用TTL接口单独供电。

### J4跳线作用是什么？
> J4共3位，1、2两位为自身供电选择，2、3两位为分压电阻屏蔽跳线。
  使用一个2位短路冒进行操作，有以下三种配置：
> 1. 短接1、2，悬空3。UIMeter工作电压5V可以从MicroUSB接口，5.08接口取电，此时MicroUSB接口，5.08接口输入电压需要在5-24V之间。
> 2. 1、2、3全部悬空。UIMeter只能从TTL接口供电，而MicroUSB和5.08端子可以支持5V以外的电压测量。
> 3. 悬空1，短接2、3. UIMeter只能从TTL接口供电，此时电压采样的分压电阻被屏蔽，电压分辨率达到2uV，可通过在J6外接K型热电偶进行测温。

### 为什么接iPad充电只有1A？
> UIMeter 的标准USB输出默认短接了D+和D-，iOS固件限制为1A充电。
  通过J6和J8外接USB公头配合带识别电阻的充电器充电电流可以达到2A充电。

## UI测量

### 检流电阻多少？
> 标准版和高配版25mR，两颗2512封装的50mR电阻并联，可选25mR锰铜丝采样。
> 高分辨率版2.2R。

### 检测电流中包括UIMeter自身工作电流吗？
> 不包括。

### 电压测量输入阻抗多少？
> 1MR。

### 如何降低压降？
> 避免使用MicroUSB接口，使用5.08端子接线。必要时从5.08端子底部焊盘焊线。

### 可以测量负电流吗？
> 可以。电流从5.08端子1脚流入，2脚流出为正；反之为负。

### 可以测量负电压吗？
> 可以。5.08端子2脚为GND，3脚为电压测量。负电压测量范围-10V以内。

### 如何提高大电流测量精度？
> 大电流测量主要误差来自于检流电阻温度系数，可以更换锰铜丝电流采样，UIMeter留有接口。

### 如何测量更大的电流？
> 使用分流器扩大电流量程。参考文档《[UIMeter使用外接电流采样电阻](UIMeter使用外接电流采样电阻v17.5.13.pdf)》。

## 联机记录数据

### 应该用什么联机线？
> 普通的USB转TTL线，电平5V，玩单片机路由器必备的那种。
> 常见方案CH340G，PL2303HX，FT232R，CP2102。
> 推荐CH340G和PL2303HX方案，价格便宜（<10￥），性能稳定。

### 为什么通信不上？
> - 检查UIMeter协议选择是否正确。
> - 检查电脑COM口选择是否正确。
> - 检查USBTTL线的TXD和RXD是否接反。
> - 检查TTL线质量，可以做自发自收测试，很多质量差的TTL线无法可靠工作在115200波特率。

### 能否无线联机？
> 可以。
> 设计时考虑使用HC06蓝牙模块无线连接。TTL接口可以直接对接。其它蓝牙模块理论上也可以。

### 一台电脑能否连接多个UIMeter？
> 可以。每个UIMeter分配一个COM口。选择对应COM口即可。

### 可以组网吗？
> 默认TTL串口为点对点网络无法组网。
> 通过TTL转485模块转换成485接口以后可以组一主多从的MODBUS网络。
> 软件可以设置从机MODBUS地址。

### 可以用TTL线供电吗？
> 可以。连接5V TTL线的VCC到对应端子即可。注意取下按键右边的短路跳线J4。

### 可以记录多长时间数据？数据量多大？
> 原则上数据记录时间长度没有上限，可以一直记录。
> 数据记录约62字节/s，因此一小时数据量大约223.2kB；每天数据量大约5.4MB；每周数据量大约37.5MB。

### 如何分析记录的数据？
> 监控软件UIMeterMon自带数据分析绘图功能。
> 此外数据格式为CSV，可以直接使用Excel进行分析。Matlab当然更好。

## 离线记录数据

### 什么是离线记录？和在线记录什么差别？
> - 离线记录是在测量过程中将测量数据存储到UIMeter内部存储器，测试完成以后统一导出数据。
   优点是测量过程中无需连接电脑，缺点是记录条数受限。
> - 在线记录将采集数据实时存储到电脑，优点记录条数无上限，缺点采集时必须连接电脑。

### 能记录多长时间？
> 记录时间=采样间隔*存储深度。
> 采样间隔最大254s，标准版最长记录时间为：254*4096/3600=289小时。
> 实际中根据需要选择合适的采样间隔。

### 如何访问离线数据？
> 使用超级终端访问UIMeter命令接口，log dump命令导出。
> 或者使用最新版UIMeterMon软件导出。

### 数据可以保存吗？
> 可以。使用超级终端捕获文字功能。或者使用UIMeterMon软件导出。

### 保存格式是什么？
> .csv文件，实际上是文本文件，也可以用Excel分析。

### 存储器会写坏吗？
> 离线存储使用EEPROM，每个存储单元写入寿命一百万次，100年保存时间。寿命远远高于FLASH。
  手动启动一次记录算一次写入。

### 离线记录断电会保存吗？什么时候删除数据？
> 数据记录时实时写入EEPROM，断电时已经写入的数据仍然存在。
> 数据记录采用覆盖模式，再次启动离线记录之前，数据一直保存。

## 电池放电测试

### 电池放电为何要外部供电？
> 一般电池电压无法满足UIMeter工作电压。推荐使用TTL线供电，注意拔掉J4。

### 电池放电可以自动关断吗？
> 可以。设定电压下限，比如锂电3.0V，镍氢0.9V，然后去掉J5跳线.

### J5跳线的作用是什么？
> 短路输出回路上的MOSFET，降低压降。

### 设置了截止电压，为什么电池放到0V了？
> 忘记拔掉J5跳线了。

### 电池放到0V了怎么办？
> 默哀一分钟，然后扔掉换个新电池。

## LCD显示

### LCD可以自己更换吗？
> 可以。LCD屏幕为标准1602屏幕，常见有蓝色、黄色，还有更酷的黑色。可以自己更换。

### TFT屏幕和1602屏幕是否可以互换？
> 可以。固件同时支持TFT屏幕和1602屏幕，需要通过串口命令设置屏幕类型然后保存。

### 没有屏幕可以工作吗？
> 可以。不装屏幕，PC上使用超级终端，或者UIMeterMon可以正常使用。

### 可以关闭LCD背光吗？
> 可以。UIMeter支持背光亮度调节，调节到最暗即关闭LCD背光。

### 如何降低UIMeter自身功耗？
> 调低LCD背光亮度。

## 温度测量

### 如何测0℃以下低温？
> 除了LCD，其余器件工作温度可达-40℃，拆掉LCD以后测量0℃以下温度。

### 支持什么热电偶？
> 支持K型热电偶。

### 支持什么NTC探头？
> 支持5k NTC探头。即25℃时阻值为5kR的热敏电阻。

### 如何获得更好的NTC测温效果？
> 请使用高分辨率版本UIMeter。
> 使用NTC测温时，NTC电压为5V，25℃时电流为5V/5k=1mA。标准版UIMeter电流分辨率为0.1mA，
  仅仅有10个字，因此电阻测量不准。高分辨率版本有1000个字，可以准确测量k级电阻。

